<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129602100-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-129602100-1');
    </script>

    <script src="https://cdn.jsdelivr.net/npm/riot@3.13/riot+compiler.min.js"></script>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css?v=20201124">

    <title>IM Standup - Imre Mehesz STANDup COMedian</title>

    <script>
        window.imxUTIL = {}

        imxUTIL.getPropFromDriveData = (data, prop) => {
            let retval

            for(let i=0; i<data.length; i++) {
            // loop through the stuff, find the prop and return it
                let[key,val] = data[i]

                if (key == prop) {
                    retval = val
                    break
                }
            }

            return retval
        }
    </script>

    <script type="riot/tag">
        <yt-wrapper>
            <iframe width="480" height="315" src="https://www.youtube.com/embed/{ opts.ytid }" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </yt-wrapper>
    </script>

    <script type="riot/tag">
        <youtube-list>
            <virtual each={ytId in ytIds}>
                <yt-wrapper ytId={ ytId }></yt-wrapper>
            </virtual>

            // code here
            let tag = this
            tag.ytIds = []

            // TODO move and cache this somewhere
            $.get("https://sheets.googleapis.com/v4/spreadsheets/1H5h8zFTJUiDjd9ddo8qsJnqhYbEdpKH9Pj9-byY6fpE/values/Sheet1!A1:D500?key=AIzaSyBLySbKUYIzPNpscruuGrSpnA3VeZ1sdvk", (data) => {
                if (data && data.values) {
                    let ytVidsArr = imxUTIL.getPropFromDriveData(data.values, "ytVids")

                    tag.update({
                        ytIds: ytVidsArr.split(",")
                    })
                }
            })
        </youtube-list>
    </script>

    <script type="riot/tag">
        <promo-header>
          <section class="module parallax parallax-1" data-type="background" data-speed="10" style="background-image:url({ promoBgImg })">
            <div class="parallax-container">
              <h1 show={ showTitle }>I<span>mre</span> M<span>ehesz</span> </h1>
              <h1 show={ showTitle }>STANDUP <span class="tilt">.COMedian</span></h1>
            </div>
          </section>

          // code here
          let tag = this
          let defaultBgImg = "https://i.imgur.com/vD0Kur7.jpg"
          let promoBgImg = defaultBgImg
          let showTitle = false

          this.promoBgImg = promoBgImg

          $.get("https://sheets.googleapis.com/v4/spreadsheets/1H5h8zFTJUiDjd9ddo8qsJnqhYbEdpKH9Pj9-byY6fpE/values/Sheet1!A1:D500?key=AIzaSyBLySbKUYIzPNpscruuGrSpnA3VeZ1sdvk", (data) => {
            if (data && data.values) {
              promoBgImg = imxUTIL.getPropFromDriveData(data.values, "promoBgImg")
              showTitle = imxUTIL.getPropFromDriveData(data.values, "showTitle")

              tag.update({
                promoBgImg: promoBgImg ? promoBgImg : defaultBgImg,
                showTitle: showTitle
              })
            }
          })
        </promo-header>
      </script>
  </head>
  <body>

<promo-header></promo-header>

<section  class="module content">
  <div class="parallax-container">
    <h2>About</h2>
    <p>40% father, 59% comedian, 1% bum/lover ... bumlover</p>
  </div>
</section>

<section class="module parallax parallax-2" data-type="background" data-speed="10">
  <div class="parallax-container">
    <h1></h1>
  </div>
</section>

<section  class="module content">
  <div class="parallax-container">
    <h2>Show Dates / Calendar</h2>
    <p>You can always catch me at random open-mics around JAX (FL) or come see me on a date below ... </p>
    <p style="text-align:center;" class="calendar">
      <iframe src="https://calendar.google.com/calendar/embed?src=r81ehf906m133dgb942k6m9kao%40group.calendar.google.com&ctz=America%2FNew_York" style="border: 0" height="600" frameborder="0" scrolling="no"></iframe>
    </p>
  </div>
</section>

<section class="module parallax parallax-3" data-type="background" data-speed="10">
  <div class="parallax-container">
    <h1></h1>
  </div>
</section>


<section  class="module content">
  <div class="parallax-container">
    <h2>Member of Hot Breath!PRO</h2>
    <p>
        <a href="https://www.joelbyarscomedy.com/" target="_blank">Hot Breath!PRO</a> lead by <strong>Joel Byars</strong> is a dedicated group of standup comedians aiming to produce the highest level of comedy around the world.
    </p>
    <p style="text-align:center;" class="hbpro-map">
        <iframe style="" src="//imstandup.com/hbprosmap/"></iframe>
    </p>
  </div>
</section>


<section class="module parallax parallax-4" data-type="background" data-speed="10">
  <div class="parallax-container">
    <h1></h1>
  </div>
</section>

<section class="module content">
  <div class="parallax-container">
    <h2>Social / Contact</h2>
    <p>
      <ul>
        <li>Sign up to my <a href="https://mailchi.mp/e41d5d556175/imstandup-newsletter">NEWSLETTER</a>! YASSSSSsss!</li>
        <li>Twitter: <a href="https://twitter.com/IMstandup" target="_blank">@IMstandup</a></li>
        <li>Facebook: <a href="https://facebook.com/IMstandup" target="_blank">IMstandup</a></li>
        <li>Instagram: <a href="https://instagram.com/IMstandup2" target="_blank">IMstandup2</a></li>
      </ul>
    </p>

    <div class="row">
    <p class="col-md-6">
          <youtube-list></youtube-list>
    </p>
    <p class="col-md-6">
      <a class="twitter-timeline" href="https://twitter.com/IMstandup?ref_src=twsrc%5Etfw" data-tweet-limit="6">Tweets by IMstandup</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    </p>
    </div>
  </div>
</section>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  
    <script>
      //parallax js
      $(document).ready(function(){
        var $window = $(window);
          $('section[data-type="background"]').each(function(){
              var $bgobj = $(this); // assigning the object
          
              $(window).scroll(function() {
                  var yPos = -($window.scrollTop() / $bgobj.data('speed')); 
                  
                  // Put together our final background position
                  var coords = '50% '+ yPos + 'px';

                  // Move the background
                  $bgobj.css({ backgroundPosition: coords });
              }); 
          });    
      });

      //menu transition js
      $(document).ready(function(){
      $(window).scroll(function(){
        var scroll = $(window).scrollTop();
            if (scroll > 0) {
          $(".navbar").addClass("navbar-scroll");
            }
            else{
          $(".navbar").removeClass("navbar-scroll");  	
        }
        if (scroll > 200) {
          $(".navbar").addClass("bg-primary");
        }

        else{
          $(".navbar").removeClass("bg-primary");  	
        }
      })
      })
    
    </script>

    <!-- mount normally -->
	  <script>
		  riot.mount('*')
	  </script>
  </body>
</html>
